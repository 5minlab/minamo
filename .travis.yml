# http://blog.stablekernel.com/continuous-integration-for-unity-5-using-travisci
# https://docs.travis-ci.com/user/osx-ci-environment/

sudo: required

os: osx
osx_image: xcode8.3

cache:
  directories:
  - scripts/unity-installers/

before_install:
  - go version
  - chmod a+x ./scripts/*.sh
  - chmod a+x ./setup_proj.sh
  - mkdir -p scripts/unity-installers/

install:
  - go get -u github.com/davecgh/go-spew/spew
  # unity editor
  - cd scripts; ./install.sh editor; cd -
  # standalone windows
  - cd scripts; ./install.sh windows; cd -

jobs:
  include:
    - script:
      - go test -v ./...
    - script:
      - go build
      - ./setup_proj.sh
      - ./scripts/build_standalone_win_dev.sh
      - ls -al ./output
    - script:
      - go build
      - ./setup_proj.sh
      - ./scripts/build_vr_win32_steamvr_dev.sh
      - ls -al ./output
    - script:
      - go build
      - ./setup_proj.sh
      - ./scripts/build_vr_win32_oculus_dev.sh
      - ls -al ./output

notifications:
  email: false

# https://docs.travis-ci.com/user/customizing-the-build#Building-Specific-Branches
branches:
  only:
  - master
